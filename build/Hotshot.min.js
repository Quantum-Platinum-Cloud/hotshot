"use strict";function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,s){for(var o=0;o<s.length;o++){var t=s[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(s,o,t){return o&&e(s.prototype,o),t&&e(s,t),s}}(),Hotshot=function(){function e(s){var o=this,t=s.waitForInputTime,n=s.seqs,i=s.combos;_classCallCheck(this,e),this._seqs=n||[],this._combos=i||[],this._pressedSeqKeys="",this._pressedComboKeys=[],this._waitForInputTime=t||500,document.addEventListener("keyup",function(e){var s=e.keyCode;o._handleKeyUpSeq(s),o._handleKeyUpCombo(s)},!1),document.addEventListener("keydown",function(e){var s=e.keyCode;o._handleKeyDownCombo(s)},!1)}return _createClass(e,[{key:"bindSeq",value:function(e,s){this._seqs.push({keyCodes:e,callback:s})}},{key:"bindCombo",value:function(e,s){this._combos.push({keyCodes:e,callback:s})}},{key:"_rmItemFromArr",value:function(e,s){var o=s.indexOf(e);console.log(e,s),o!==-1&&s.splice(o,1),console.log(e,s)}},{key:"_handleKeyUpCombo",value:function(e){this._rmItemFromArr(e,this._pressedComboKeys),console.log(this._pressedComboKeys)}},{key:"_handleKeyDownCombo",value:function(e){this._pressedComboKeys.includes(e)||this._pressedComboKeys.push(e);var s=this._checkCombosForPressedKeys();s&&s.callback()}},{key:"_checkCombosForPressedKeys",value:function(){var e=this._combos,s=this._pressedComboKeys,o=null;return e.forEach(function(e){var t=e.keyCodes,n=e.callback,i=t.join(""),a=s.join("");i===a&&(o={keyCodes:t,callback:n})}),o}},{key:"_resetWaitInputTimer",value:function(e){var s=this,o=arguments.length<=1||void 0===arguments[1]?this._waitForInputTime:arguments[1];clearTimeout(this._waitInputTimer),this._waitInputTimer=setTimeout(function(){s._pressedSeqKeys="","function"==typeof e&&e()},o)}},{key:"_checkSeqsForPressedKeys",value:function(){var e=this._seqs,s=this._pressedSeqKeys,o=null,t=!1;return e.forEach(function(e){var n=e.keyCodes,i=e.callback,a=n.join("");s===a?o={keyCodes:n,callback:i}:0===a.indexOf(s)&&(t=!0)}),{match:o,shouldWait:t}}},{key:"_handleKeyUpSeq",value:function(e){this._pressedSeqKeys+=e;var s=this._checkSeqsForPressedKeys(),o=s.match,t=s.shouldWait;o?t?this._resetWaitInputTimer(o.callback):this._resetWaitInputTimer(o.callback,0):this._resetWaitInputTimer()}}]),e}();window.Hotshot=Hotshot;