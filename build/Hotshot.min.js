"use strict";function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,s){for(var t=0;t<s.length;t++){var o=s[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(s,t,o){return t&&e(s.prototype,t),o&&e(s,o),s}}(),Hotshot=function(){function e(s){var t=this,o=s.waitForInputTime,n=s.seqs,i=s.combos;_classCallCheck(this,e),this._seqs=n||[],this._combos=i||[],this._pressedSeqKeys="",this._pressedComboKeys=[],this._pressedComboMetaKeys=[],this._waitForInputTime=o||500,document.addEventListener("keyup",function(e){var s=e.target.tagName;"INPUT"!==s&&"TEXTAREA"!==s&&(t._handleKeyUpSeq(e.keyCode),t._handleKeyUpCombo(e.keyCode))}),document.addEventListener("keydown",function(e){var s=e.target.tagName;"INPUT"!==s&&"TEXTAREA"!==s&&t._handleKeyDownCombo(e.keyCode,e.metaKey)})}return _createClass(e,[{key:"bindSeq",value:function(e,s){this._seqs.push({keyCodes:e,callback:s})}},{key:"bindCombo",value:function(e,s){this._combos.push({keyCodes:e,callback:s})}},{key:"_rmItemFromArr",value:function(e,s){var t=s.indexOf(e);t!==-1&&s.splice(t,1)}},{key:"_handleKeyUpCombo",value:function(e){var s=this;this._rmItemFromArr(e,this._pressedComboKeys),this._pressedComboMetaKeys.length>0&&(this._pressedComboMetaKeys.forEach(function(e){return s._rmItemFromArr(e,s._pressedComboKeys)}),this._pressedComboMetaKeys=[])}},{key:"_handleKeyDownCombo",value:function(e,s){this._pressedComboKeys.indexOf(e)===-1&&(this._pressedComboKeys.push(e),s&&this._pressedComboMetaKeys.push(e));var t=this._checkCombosForPressedKeys();t&&(this._pressedComboKeys=[],this._pressedComboMetaKeys=[],t.callback())}},{key:"_checkCombosForPressedKeys",value:function(){var e=this._combos,s=this._pressedComboKeys,t=null;return e.forEach(function(e){var o=e.keyCodes,n=e.callback,i=o.join(""),r=s.join("");i===r&&(t={keyCodes:o,callback:n})}),t}},{key:"_resetWaitInputTimer",value:function(e){var s=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._waitForInputTime;clearTimeout(this._waitInputTimer),this._waitInputTimer=setTimeout(function(){s._pressedSeqKeys="","function"==typeof e&&e()},t)}},{key:"_checkSeqsForPressedKeys",value:function(){var e=this._seqs,s=this._pressedSeqKeys,t=null,o=!1;return e.forEach(function(e){var n=e.keyCodes,i=e.callback,r=n.join("");s===r?t={keyCodes:n,callback:i}:0===r.indexOf(s)&&(o=!0)}),{match:t,shouldWait:o}}},{key:"_handleKeyUpSeq",value:function(e){this._pressedSeqKeys+=e;var s=this._checkSeqsForPressedKeys(),t=s.match,o=s.shouldWait;t?o?this._resetWaitInputTimer(t.callback):this._resetWaitInputTimer(t.callback,0):this._resetWaitInputTimer()}}]),e}();window.Hotshot=Hotshot,"undefined"!=typeof module&&module.exports&&(module.exports=Hotshot),"function"==typeof define&&define.amd&&define(function(){return Hotshot});